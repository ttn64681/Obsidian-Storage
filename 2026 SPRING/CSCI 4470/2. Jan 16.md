```table-of-contents
```

# The network core
- mesh of interconnected routers
- **packet-switching:** method where hosts break application-layer messages into packets that are transmitted over a network
	- 


## 2 key network-core functions
- need routing algorithm
	- to decide which is the best route

| local forwarding table |             |
| ---------------------- | ----------- |
| header val             | output link |
| 0100                   | 3           |
| 0101                   | 2           |
| 0111                   | 2           |
| 1001                   | 1           |

## 1 core function:
- before transmission, send random packet and see if it reaches destination w/in 2 levels of hops
- keep increasing hops to measure the min num of hops to reach destination
- send a reconnaissance packet to see if any slow routes

**Forwarding:**
- aka "switching"
- local action



maintaining dedicated networks to network is not feasible/maintainable, so we have central network: global ISPs

![[network of networks.png]]

# Issues in Network Design
- even in a well-designed system, things can go wrong
	- might not have same bandwidth
	- version differences
	- wear and tear so processing speed is reduced
	- packet droppers
	- limited buffers


# Packet-Switching: store-and-forward
- router needs to be there to store the packets
	- packets are immediately forwarded
	- will wait for packets to arrive
	- then will do processing
	- and THEN will forward

![[packet-switching - store and forward.png]]
- **packet transmission delay:** take L/R secs to transmit (push out) L-bit packet into link at R bps
	- L - bits per packet
	- R - rate (per sec)
- **store and forward:** entire packet must arrive at router before it can be transmitted on next link

- ex: 1 packet to reach destination
- answer: 2L / R
	- L/R is for the whole packet over one hop/link
	- 1st hop to router
	- 2nd hop to destination =
	- 2L/R

- ex: 3 packets sent to destination
- answer: 4L / R
	- 2L/R for first packet at destination, while 2nd packet sent at same time to router for 1L/R
		- = 3L/R
	- 2nd packet sent to destination (3L/R), while 3rd packet sent to router (1L/R)
	- 3rd packet sent to destination
		- = 4L/R


## Packet-switching: queueing
![[packet switching - queueing.png]]
- queueing occurs when work arrives faster than it can be serviced
- when queue is full, it stats dropping packets
- even if emission rate and transmission rate is same, queue build up will happen due to internal/processing delay within the router

## Alternative to packet-switching: circuit switching
- end-end resources allocated to, reserved for "call" b/w source and destination
- provides dedicated, reserved resources (bandwidth) for the duration of a connection, ensuring consistent quality of service
- No congestion: once a circuit is established, there's no risk of network congestion affecting that specific connection
![[circuit siwtching.png]]
- each link has 4 circuits
	- call gets 2nd circuit in top link and 1st circuit in right link
- dedicated resources: no sharing
	- circuit-like (guaranteed) performance


## Packet-switching vs Circuit-switching
Q: how many user can use this network under circuit-switching and packet-switching?
- packet switching: w/ 35 users, prob >10 active at same time is < .0004

A: packet-switching = 35 users capacity
	10 users can be active at same or any given time
A: circuit-switching = 10 users capacity
	why?

- probability a user will be active is 1/10
- probability a user won't be active is 9/10
- probability that 10 users active at same time is ...
	- dependent or independent
		- independent
			- probability and multiple them all
			- 1/10^10
			- (binomial theorem)

## Why use PS or CS?

Why use circuit-switching?
- more reliable, for prioritizing the actual data

Why use packet-switching?
- when you can't afford delay and value speed

### Why use Circuit-Switching?
-   **Guaranteed Performance:** Provides dedicated, reserved resources (bandwidth) for the duration of a connection, ensuring consistent quality of service (e.g., for phone calls, video conferencing).
-   **No Congestion:** Once a circuit is established, there's no risk of network congestion affecting that specific connection.

### Why use Packet-Switching?
-   **Efficient Resource Utilization:** Resources are shared among users, making it highly efficient for "bursty" data traffic (e.g., web browsing, email) where users are active intermittently.
-   **Flexibility and Robustness:** Packets can be dynamically routed over different paths, increasing network resilience and allowing for rerouting around failed links.
-   **Cost-Effective:** Generally cheaper to implement and scale due to the shared nature of resources and lack of fixed setup overhead per connection.

![[2. Jan 16.png]]
# Packet delay and loss
![[packet delay and loss.png]]
![[packet delay - 4 sources.png]]
![[nodal and queueing delay.png]]
![[transmission and porpagation delay.png]]
- propagation delay accounts for the length of the link (distance)
- transmission delay just cares about L (packet length bits) and R (transmission rate bps)

![[caravan analogy.png]]
## Propagation vs Transmission delay
### Propagation delay matters
- keep everything else the same, but change distance
- by increasing distance, you increase propagation delay


# Packet queueing delay (revisited)
L*a / R
- **"traffic intensity"**

# Measuring delay/time via 'traceroute'
- you can check the hops and time via sending packets using 'traceroute' program
- a reconnaissance packet
## "Real" Internet delays and routes
- what do "real" Internet delay and loss look like?
- traceroute: provides delay measurement from source to router along en-end Internet path towards destination.
- For all i:
	- sends 3 packets that will reach router i on path towards destination (with time to live field value of i)
	- router i will return packets to sender
	- sender measures time interval b/w transmission and reply

![[traceroute example.png]]
- 7-8: huge jump for all 3, maybe due to propagation delay
- 15-16: doing 16 hops is somehow less time than 15 hops?? why?
	- due to queueing delay.. i think.. congestion was lower for 16 hops luckily...
- *** = no response

# Packet loss
![[packet loss.png]]

## Throughput
![[throughput.png]]
![[throughput bottleneck.png]]



<hr>
# Vocab
- **packet-switching:** method where hosts break application-layer messages into packets that are transmitted over a network
- **store and forward:** entire packet must arrive at router before it can be transmitted on next link
- **emission rate**: input rate of sending packet to router
- **transmission rate**: output rate of router forwarding packet 

- **packet transmission delay:** take L/R secs to transmit (push out) L-bit packet into link at R bps
	- L - bits per packet
	- R - rate (per sec)