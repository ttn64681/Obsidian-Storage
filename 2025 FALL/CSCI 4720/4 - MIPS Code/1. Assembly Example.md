NEED System Calls to do I/O Operations


| Service      | System call code | Arguments     | Result           |                                                                         |
| ------------ | ---------------- | ------------- | ---------------- | ----------------------------------------------------------------------- |
| print_int    | 1                | $a0 = integer |                  | update register $v0, which stores result, and $a0, which stores int arg |
| print_string | 4                | $a0 = string  |                  | pass address of string to service                                       |
| read_int     | 5                |               | integer (in $v0) | update register $v0, which stores result,                               |
|              |                  |               |                  |                                                                         |
|              |                  |               |                  |                                                                         |
- Library function calls:
	- eventually call system calls
- System calls are provided by os kernel

vi test_io.s:

INCORRECT:
```
.data

message:

.asciiz "Please input an integer:\n"

message_out:

.asciiz "The integer you just"

  

.text

main:

la $a0, message # loads addr of message into register $a0

li $v0, 4 # loads int 4 into register $v0, which is **print_string**

syscall # executes syscall specified by $v0

li $v0, 5 # loads int 5 into register $v5, which is **read_int**

syscall

move $a0, $v0 # we move $v0 (which is )

li $v0, 1 # loads int 1 into register $v0, which is **print_int**

syscall

jr $ra # Jumps to addr in $ra, typically used to exit main func
```

CORRECT:
```
.data

message:

.asciiz "Please input an integer:\n"

message_out:

.asciiz "The integer you just inputted is:\n"

  

.text

main:

la $a0, message

li $v0, 4

syscall

li $v0, 5

syscall

move $a1, $v0

la $a0, message_out

li $v0, 4

syscall

move $a0, $a1

li $v0, 1

syscall

jr $ra
```

- to do a print system call, you need $a0 to store the argument you want to print
- therefore, you must always update $a0 accordingly
- You can create temporary value stored at reg $a1 if wanted/needed

## Comparisons in Assembly
- **Compare input num if == 5?**

```
.data

message:

.asciiz "Please input an integer:\n"

message_out:

.asciiz "The integer you just inputted is:\n"

message_equal:

.asciiz "Congratulations. You got it!\n"

  

.text

main:
la $a0, message # load addr of message
li $v0, 4 # print_string the message
syscall

li $v0, 5 # read string from input
move $t0, $v0 # store input into temp var
syscall

la $a0, message_equal # load addr of message_equal


bne $v0, 5, Else

        li $v0, 4

jr $ra
```

