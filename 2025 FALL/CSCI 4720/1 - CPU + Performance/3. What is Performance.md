
## Performance - what does it mean?
- Capacity, range, and speed for a number of commercial airplanes
- Which has the fastest performance?
![[REPO/2025 FALL/CSCI 4720/1 - CPU + Performance/Pasted Images/Airplane Performance.png]]


## Performance in terms of Speed
- 2 Definitions:
	1. Fastest plane = highest cruising speed, taking single passenger (Concorde)
	2. Transporting 450 passengers from one point to another (747)
- **Similarly, different definition for computer performance**

## Throughput and Response Time
- Computer measure of performance
- **Response time** or **execution time**:
	- *total time required for computer to complete task in a second*
- **Throughput** or **bandwidth**:
	- *total amount of work done during given time period*
- *Decreasing response time almost always improves throughput*
- ***We focus on response time***

Ex: Do the following changes to computer system increase throughput, decrease response time, or both?
1. Replacing processor w/ faster version
	- Both: *Decrease response time, Increase throughput*
2. Adding additional processors to sys uses multiple processors for separate tasks - for example, searching web
	- Both: *Decrease response time, Increase throughput*

## Performance
$$
Performance_X = 1 / Execution time_X
$$
$$
Performance_X > Performance_Y
$$
$$ 
1 / Execution time_X > 1 / Execution time_Y
$$
$$
Execution time_Y > Execution time_X 
$$

## Relative Performance
- Ex: Computer A runs program in 10 secs and computer B runs same program in 15 secs, how much faster is A than B?
$$Performance_A / Performance_B = $$
$$ Execution time_B / Execution time_A = n (ratio)$$
- *Performance ratio is 15/10 = 1.5*
- *A is therefore 1.5 times as fast as B*
- *Computer B is 1.5 times slower than computer A*

## CPU Time
- Divided in 2:
	1. **User CPU time**
		- *time CPU spends executing code from user's* application
	2. **System CPU time**
		- *time CPU spends executing os code on behalf of user's application (e.g., handling system calls for I/O, mem management, etc.)*
- **We use user CPU time as CPU performance metric**
Ex:
	time      ./helloworld
		usr
		sys
		real

## CPU Clocking
- Operation of digital hardware governed by constant-rate clock
![[REPO/2025 FALL/CSCI 4720/1 - CPU + Performance/Pasted Images/CPU Clocking.png]]
- Clock period: duration of clock cycle
	- e.g., 250 ps = .25 ns = 250 x 10^-12 s
- **Clock frequency (rate):** cycles per second
	- e.g., 4.0 GHz = 4000 MHz = 4.0 x 10^9 Hz
Ex:
- CPU 1 = 4GHz, CPU 2 = 2GHz
	- *CPU 1 is faster, since more cycles per second*

## CPU Time
$$
CPU Time = CPU Clock Cycles * Clock Cycle Time
$$
$$
 = CPU Clock Cycles / Clock Rate
$$
- **Performance improved by:**
	- *Reducing number of clock cycles*
	- *Increasing clock rate / frequency*
	- Hardware designers must often trade off clock rate against cycle count

- How to reduce cycles?
	- design programs w/ fewer ops
- How to improve frequency?
	- Hardware change
### CPU Time Example
• Computer A: 2 GHz clock, 10s CPU time
• Designing Computer B
	• Aim for 6s CPU time
	• Can do faster clock, but causes 1.2× clock cycles
	**- what is the CPU clock rate of computer B???**


```CPU time B = clock cycles B / freq B

6s = 1.2 * (clock cycles A) / freq B?
freq = 1.2 * (clock cycles A) / 6s 

clock cycles A = CPU time A * freq A = 10s * 2GHz = 20 giga-cycles

freq = 1.2 * (20 giga-cycles) / 6s
```



Computer A :
	-> 10s x 2GHz = 20 x 10^9

Computer B : 6s CPU Time, faster clock, but causes 1.2x clock cycles (A)
- freq_B = Cycles_B / CPU Time_B
	= 1.2 x Cycles_A / 6s
- Cycles_A = 10s x 2GHz
- freq_B = 1.2 x 10s x 2GHz / 6s CPU time
	= 4 GHz

![[REPO/2025 FALL/CSCI 4720/1 - CPU + Performance/Pasted Images/Clock Rate Question.png]]

<hr>

## Performance Equation II
- Number of clock cycles required for a program can be written as:
	- **CPU clock cycles = Instructions for a program x Avg clock cycles per Instruction (CPI)**
		- if cache miss, instructions take long time to fetch from main memory to cache

## Classic CPU Performance Equation
$$
Execution time = clock cycle time * Instruction count * CPI
$$
$$
CPU TIME = Instruction\_count * CPI / clock\_rate
$$
- These equations separate the 3 key factors that affect performance
	1. **CPI,**
	2. **Instruction Count,**
	3. **Cycle Time**
- *if you have different ISA, number of Instructions can be different*
	- *design of Instruction Set affects Number of Instructions*

## Instruction Count and CPI
$$Clock Cycles = Instruction Count * Cycles per Instruction (CPI)$$
$$CPU Time = Instruction Count * CPI * Clock Cycle Time$$
$$= Instruction Count * CPI / Clock Rate$$
- 00 -> no optimization
- 01
- 02
- 03 -> highest optimization

## CPI Example
- Ex:
	- Computer A : Cycle Time = 250 ps, CPI = 2.0
	- Computer B : Cycle Time = 500 ps, CPI = 1.2
	- Same ISA (Same instruction count, same compiler)
	- Which is faster? and by how much?

```

CPU Time A = 250 x 2 x 1 = 500
CPU Time B = 500 x 1.2 x 1 = 600
```


Comp A; CPU Time = 1 * 2 * 250 = 500
Comp B; CPU Time = 1 * 1.2 * 500 = 600

PerformanceB / PerformanceA = 600 / 500 = 1.2 => **B is slower than A by 1.2**
